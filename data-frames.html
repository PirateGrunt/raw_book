<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>raw - R Actuarial Workshops</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="This is a companion to actuarial workshops.">
  <meta name="generator" content="bookdown 0.1 and GitBook 2.6.7">

  <meta property="og:title" content="raw - R Actuarial Workshops" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a companion to actuarial workshops." />
  <meta name="github-repo" content="PirateGrunt/raw_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="raw - R Actuarial Workshops" />
  
  <meta name="twitter:description" content="This is a companion to actuarial workshops." />
  

<meta name="author" content="Brian A. Fannin, ACAS">

<meta name="date" content="2016-07-16">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="lists.html">
<link rel="next" href="basic-visualization.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">raw - Raw Actuarial Workshops</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#why-does-this-book-exist"><i class="fa fa-check"></i><b>1.1</b> Why does this book exist?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#other-stuff"><i class="fa fa-check"></i><b>1.2</b> Other stuff</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#operating-systems"><i class="fa fa-check"></i><b>1.2.1</b> Operating systems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>2</b> Setup</a><ul>
<li class="chapter" data-level="2.1" data-path="setup.html"><a href="setup.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a><ul>
<li class="chapter" data-level="2.1.1" data-path="setup.html"><a href="setup.html#installing-r"><i class="fa fa-check"></i><b>2.1.1</b> Installing R</a></li>
<li class="chapter" data-level="2.1.2" data-path="setup.html"><a href="setup.html#installing-r-studio"><i class="fa fa-check"></i><b>2.1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="2.1.3" data-path="setup.html"><a href="setup.html#it"><i class="fa fa-check"></i><b>2.1.3</b> IT</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="setup.html"><a href="setup.html#the-operating-environment"><i class="fa fa-check"></i><b>2.2</b> The Operating Environment</a><ul>
<li class="chapter" data-level="2.2.1" data-path="setup.html"><a href="setup.html#command-line-interface"><i class="fa fa-check"></i><b>2.2.1</b> Command-line interface</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="setup.html"><a href="setup.html#entering-commands"><i class="fa fa-check"></i><b>2.3</b> Entering Commands</a></li>
<li class="chapter" data-level="2.4" data-path="setup.html"><a href="setup.html#getting-help"><i class="fa fa-check"></i><b>2.4</b> Getting help</a></li>
<li class="chapter" data-level="2.5" data-path="setup.html"><a href="setup.html#the-working-directory"><i class="fa fa-check"></i><b>2.5</b> The working directory</a><ul>
<li class="chapter" data-level="2.5.1" data-path="setup.html"><a href="setup.html#directory-paths"><i class="fa fa-check"></i><b>2.5.1</b> Directory paths</a></li>
<li class="chapter" data-level="2.5.2" data-path="setup.html"><a href="setup.html#source-files"><i class="fa fa-check"></i><b>2.5.2</b> Source files</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="setup.html"><a href="setup.html#your-first-script"><i class="fa fa-check"></i><b>2.6</b> Your first script</a><ul>
<li class="chapter" data-level="2.6.1" data-path="setup.html"><a href="setup.html#executing-a-script"><i class="fa fa-check"></i><b>2.6.1</b> Executing a script</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html"><i class="fa fa-check"></i><b>3</b> Elements of the Language</a><ul>
<li class="chapter" data-level="3.1" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#variables"><i class="fa fa-check"></i><b>3.1</b> Variables</a><ul>
<li class="chapter" data-level="3.1.1" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#assignment"><i class="fa fa-check"></i><b>3.1.1</b> Assignment</a></li>
<li class="chapter" data-level="3.1.2" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#data-types"><i class="fa fa-check"></i><b>3.1.2</b> Data types</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#operators"><i class="fa fa-check"></i><b>3.2</b> Operators</a><ul>
<li class="chapter" data-level="3.2.1" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#mathematical-operators"><i class="fa fa-check"></i><b>3.2.1</b> Mathematical Operators</a></li>
<li class="chapter" data-level="3.2.2" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#logical-operators"><i class="fa fa-check"></i><b>3.2.2</b> Logical Operators</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#functions"><i class="fa fa-check"></i><b>3.3</b> Functions</a><ul>
<li class="chapter" data-level="3.3.1" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#a-few-mathematical-functions"><i class="fa fa-check"></i><b>3.3.1</b> A few mathematical functions</a></li>
<li class="chapter" data-level="3.3.2" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#comments"><i class="fa fa-check"></i><b>3.3.2</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="elements-of-the-language.html"><a href="elements-of-the-language.html#quiz"><i class="fa fa-check"></i><b>3.4</b> Quiz</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>4</b> Packages</a><ul>
<li class="chapter" data-level="4.1" data-path="packages.html"><a href="packages.html#what-are-packages"><i class="fa fa-check"></i><b>4.1</b> What are packages</a><ul>
<li class="chapter" data-level="4.1.1" data-path="packages.html"><a href="packages.html#where-are-packages-stored"><i class="fa fa-check"></i><b>4.1.1</b> Where are packages stored?</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="packages.html"><a href="packages.html#how-to-install-a-package"><i class="fa fa-check"></i><b>4.2</b> How to install a package</a><ul>
<li class="chapter" data-level="4.2.1" data-path="packages.html"><a href="packages.html#where-does-the-package-get-installed"><i class="fa fa-check"></i><b>4.2.1</b> Where does the package get installed?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a><ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#what-is-a-vector"><i class="fa fa-check"></i><b>5.1</b> What is a vector?</a><ul>
<li class="chapter" data-level="5.1.1" data-path="vectors.html"><a href="vectors.html#vector-properties"><i class="fa fa-check"></i><b>5.1.1</b> Vector properties</a></li>
<li class="chapter" data-level="5.1.2" data-path="vectors.html"><a href="vectors.html#vector-construction"><i class="fa fa-check"></i><b>5.1.2</b> Vector construction</a></li>
<li class="chapter" data-level="5.1.3" data-path="vectors.html"><a href="vectors.html#seq"><i class="fa fa-check"></i><b>5.1.3</b> <code>seq</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="vectors.html"><a href="vectors.html#rep"><i class="fa fa-check"></i><b>5.1.4</b> <code>rep</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="vectors.html"><a href="vectors.html#concatenation"><i class="fa fa-check"></i><b>5.1.5</b> Concatenation</a></li>
<li class="chapter" data-level="5.1.6" data-path="vectors.html"><a href="vectors.html#growth-by-assignment"><i class="fa fa-check"></i><b>5.1.6</b> Growth by assignment</a></li>
<li class="chapter" data-level="5.1.7" data-path="vectors.html"><a href="vectors.html#vector-access---by-index"><i class="fa fa-check"></i><b>5.1.7</b> Vector access - by index</a></li>
<li class="chapter" data-level="5.1.8" data-path="vectors.html"><a href="vectors.html#vector-access---logical-access"><i class="fa fa-check"></i><b>5.1.8</b> Vector access - logical access</a></li>
<li class="chapter" data-level="5.1.9" data-path="vectors.html"><a href="vectors.html#which"><i class="fa fa-check"></i><b>5.1.9</b> <code>which</code></a></li>
<li class="chapter" data-level="5.1.10" data-path="vectors.html"><a href="vectors.html#sample"><i class="fa fa-check"></i><b>5.1.10</b> <code>sample</code></a></li>
<li class="chapter" data-level="5.1.11" data-path="vectors.html"><a href="vectors.html#sample-ii"><i class="fa fa-check"></i><b>5.1.11</b> <code>sample</code> II</a></li>
<li class="chapter" data-level="5.1.12" data-path="vectors.html"><a href="vectors.html#order"><i class="fa fa-check"></i><b>5.1.12</b> <code>order</code></a></li>
<li class="chapter" data-level="5.1.13" data-path="vectors.html"><a href="vectors.html#vector-arithmetic"><i class="fa fa-check"></i><b>5.1.13</b> Vector arithmetic</a></li>
<li class="chapter" data-level="5.1.14" data-path="vectors.html"><a href="vectors.html#recycling"><i class="fa fa-check"></i><b>5.1.14</b> Recycling</a></li>
<li class="chapter" data-level="5.1.15" data-path="vectors.html"><a href="vectors.html#set-theory---part-i"><i class="fa fa-check"></i><b>5.1.15</b> Set theory - Part I</a></li>
<li class="chapter" data-level="5.1.16" data-path="vectors.html"><a href="vectors.html#set-theory---part-ii"><i class="fa fa-check"></i><b>5.1.16</b> Set theory - Part II</a></li>
<li class="chapter" data-level="5.1.17" data-path="vectors.html"><a href="vectors.html#summarization"><i class="fa fa-check"></i><b>5.1.17</b> Summarization</a></li>
<li class="chapter" data-level="5.1.18" data-path="vectors.html"><a href="vectors.html#vectors-1"><i class="fa fa-check"></i><b>5.1.18</b> Vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#from-data"><i class="fa fa-check"></i><b>5.2</b> From data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="vectors.html"><a href="vectors.html#data-types-1"><i class="fa fa-check"></i><b>5.2.1</b> Data types</a></li>
<li class="chapter" data-level="5.2.2" data-path="vectors.html"><a href="vectors.html#what-is-it"><i class="fa fa-check"></i><b>5.2.2</b> What is it?</a></li>
<li class="chapter" data-level="5.2.3" data-path="vectors.html"><a href="vectors.html#data-conversion"><i class="fa fa-check"></i><b>5.2.3</b> Data conversion</a></li>
<li class="chapter" data-level="5.2.4" data-path="vectors.html"><a href="vectors.html#class"><i class="fa fa-check"></i><b>5.2.4</b> Class</a></li>
<li class="chapter" data-level="5.2.5" data-path="vectors.html"><a href="vectors.html#mode"><i class="fa fa-check"></i><b>5.2.5</b> Mode</a></li>
<li class="chapter" data-level="5.2.6" data-path="vectors.html"><a href="vectors.html#dates-and-times"><i class="fa fa-check"></i><b>5.2.6</b> Dates and times</a></li>
<li class="chapter" data-level="5.2.7" data-path="vectors.html"><a href="vectors.html#more-on-dates"><i class="fa fa-check"></i><b>5.2.7</b> More on dates</a></li>
<li class="chapter" data-level="5.2.8" data-path="vectors.html"><a href="vectors.html#what-day-is-it"><i class="fa fa-check"></i><b>5.2.8</b> What day is it?</a></li>
<li class="chapter" data-level="5.2.9" data-path="vectors.html"><a href="vectors.html#more-reading-on-dates"><i class="fa fa-check"></i><b>5.2.9</b> More reading on dates</a></li>
<li class="chapter" data-level="5.2.10" data-path="vectors.html"><a href="vectors.html#factors"><i class="fa fa-check"></i><b>5.2.10</b> Factors</a></li>
<li class="chapter" data-level="5.2.11" data-path="vectors.html"><a href="vectors.html#altering-factors"><i class="fa fa-check"></i><b>5.2.11</b> Altering factors</a></li>
<li class="chapter" data-level="5.2.12" data-path="vectors.html"><a href="vectors.html#avoid-factors"><i class="fa fa-check"></i><b>5.2.12</b> Avoid factors</a></li>
<li class="chapter" data-level="5.2.13" data-path="vectors.html"><a href="vectors.html#questions"><i class="fa fa-check"></i><b>5.2.13</b> Questions</a></li>
<li class="chapter" data-level="5.2.14" data-path="vectors.html"><a href="vectors.html#answers"><i class="fa fa-check"></i><b>5.2.14</b> Answers</a></li>
<li class="chapter" data-level="5.2.15" data-path="vectors.html"><a href="vectors.html#from-vectors-to-matrices-and-lists"><i class="fa fa-check"></i><b>5.2.15</b> From vectors to matrices and lists</a></li>
<li class="chapter" data-level="5.2.16" data-path="vectors.html"><a href="vectors.html#a-matrix"><i class="fa fa-check"></i><b>5.2.16</b> A matrix</a></li>
<li class="chapter" data-level="5.2.17" data-path="vectors.html"><a href="vectors.html#section"><i class="fa fa-check"></i><b>5.2.17</b> </a></li>
<li class="chapter" data-level="5.2.18" data-path="vectors.html"><a href="vectors.html#section-1"><i class="fa fa-check"></i><b>5.2.18</b> </a></li>
<li class="chapter" data-level="5.2.19" data-path="vectors.html"><a href="vectors.html#matrix-metadata"><i class="fa fa-check"></i><b>5.2.19</b> Matrix metadata</a></li>
<li class="chapter" data-level="5.2.20" data-path="vectors.html"><a href="vectors.html#data-access-for-a-matrix"><i class="fa fa-check"></i><b>5.2.20</b> Data access for a matrix</a></li>
<li class="chapter" data-level="5.2.21" data-path="vectors.html"><a href="vectors.html#data-access-continued"><i class="fa fa-check"></i><b>5.2.21</b> Data access continued</a></li>
<li class="chapter" data-level="5.2.22" data-path="vectors.html"><a href="vectors.html#matrix-summary"><i class="fa fa-check"></i><b>5.2.22</b> Matrix summary</a></li>
<li class="chapter" data-level="5.2.23" data-path="vectors.html"><a href="vectors.html#more-than-two-dimensions"><i class="fa fa-check"></i><b>5.2.23</b> More than two dimensions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#exercise"><i class="fa fa-check"></i><b>5.3</b> Exercise</a></li>
<li class="chapter" data-level="5.4" data-path="vectors.html"><a href="vectors.html#answers-1"><i class="fa fa-check"></i><b>5.4</b> Answers</a><ul>
<li class="chapter" data-level="5.4.1" data-path="vectors.html"><a href="vectors.html#next"><i class="fa fa-check"></i><b>5.4.1</b> Next</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>6</b> Lists</a><ul>
<li class="chapter" data-level="6.1" data-path="lists.html"><a href="lists.html#lists-overview"><i class="fa fa-check"></i><b>6.1</b> Lists Overview</a><ul>
<li class="chapter" data-level="6.1.1" data-path="lists.html"><a href="lists.html#vs."><i class="fa fa-check"></i><b>6.1.1</b> [ vs. [[</a></li>
<li class="chapter" data-level="6.1.2" data-path="lists.html"><a href="lists.html#recursive-storage"><i class="fa fa-check"></i><b>6.1.2</b> Recursive storage</a></li>
<li class="chapter" data-level="6.1.3" data-path="lists.html"><a href="lists.html#list-metadata"><i class="fa fa-check"></i><b>6.1.3</b> List metadata</a></li>
<li class="chapter" data-level="6.1.4" data-path="lists.html"><a href="lists.html#lapply"><i class="fa fa-check"></i><b>6.1.4</b> <code>lapply</code></a></li>
<li class="chapter" data-level="6.1.5" data-path="lists.html"><a href="lists.html#why-lapply"><i class="fa fa-check"></i><b>6.1.5</b> Why <code>lapply</code>?</a></li>
<li class="chapter" data-level="6.1.6" data-path="lists.html"><a href="lists.html#summary-functions"><i class="fa fa-check"></i><b>6.1.6</b> Summary functions</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="lists.html"><a href="lists.html#questions-1"><i class="fa fa-check"></i><b>6.2</b> Questions</a></li>
<li class="chapter" data-level="6.3" data-path="lists.html"><a href="lists.html#answers-2"><i class="fa fa-check"></i><b>6.3</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>7</b> Data Frames</a><ul>
<li class="chapter" data-level="7.1" data-path="data-frames.html"><a href="data-frames.html#whats-a-data-frame"><i class="fa fa-check"></i><b>7.1</b> What’s a data frame?</a><ul>
<li class="chapter" data-level="7.1.1" data-path="data-frames.html"><a href="data-frames.html#creating-a-data-frame"><i class="fa fa-check"></i><b>7.1.1</b> Creating a data frame</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-frames.html"><a href="data-frames.html#basic-properties-of-a-data-frame"><i class="fa fa-check"></i><b>7.1.2</b> Basic properties of a data frame</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-frames.html"><a href="data-frames.html#referencing"><i class="fa fa-check"></i><b>7.1.3</b> Referencing</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-frames.html"><a href="data-frames.html#ordering"><i class="fa fa-check"></i><b>7.1.4</b> Ordering</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-frames.html"><a href="data-frames.html#altering-and-adding-columns"><i class="fa fa-check"></i><b>7.1.5</b> Altering and adding columns</a></li>
<li class="chapter" data-level="7.1.6" data-path="data-frames.html"><a href="data-frames.html#eliminating-columns"><i class="fa fa-check"></i><b>7.1.6</b> Eliminating columns</a></li>
<li class="chapter" data-level="7.1.7" data-path="data-frames.html"><a href="data-frames.html#rbind-cbind"><i class="fa fa-check"></i><b>7.1.7</b> rbind, cbind</a></li>
<li class="chapter" data-level="7.1.8" data-path="data-frames.html"><a href="data-frames.html#merging"><i class="fa fa-check"></i><b>7.1.8</b> Merging</a></li>
<li class="chapter" data-level="7.1.9" data-path="data-frames.html"><a href="data-frames.html#altering-column-names"><i class="fa fa-check"></i><b>7.1.9</b> Altering column names</a></li>
<li class="chapter" data-level="7.1.10" data-path="data-frames.html"><a href="data-frames.html#subsetting---the-easy-way"><i class="fa fa-check"></i><b>7.1.10</b> Subsetting - The easy way</a></li>
<li class="chapter" data-level="7.1.11" data-path="data-frames.html"><a href="data-frames.html#subsetting---the-hardish-way"><i class="fa fa-check"></i><b>7.1.11</b> Subsetting - The hard(ish) way</a></li>
<li class="chapter" data-level="7.1.12" data-path="data-frames.html"><a href="data-frames.html#subsetting---yet-another-way"><i class="fa fa-check"></i><b>7.1.12</b> Subsetting - Yet another way</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-frames.html"><a href="data-frames.html#summarizing"><i class="fa fa-check"></i><b>7.2</b> Summarizing</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-frames.html"><a href="data-frames.html#summarizing-visually---1"><i class="fa fa-check"></i><b>7.2.1</b> Summarizing visually - 1</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-frames.html"><a href="data-frames.html#summarizing-visually---2"><i class="fa fa-check"></i><b>7.2.2</b> Summarizing visually - 2</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-frames.html"><a href="data-frames.html#advanced-data-frame-tools"><i class="fa fa-check"></i><b>7.2.3</b> Advanced data frame tools</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-frames.html"><a href="data-frames.html#reading-data"><i class="fa fa-check"></i><b>7.2.4</b> Reading data</a></li>
<li class="chapter" data-level="7.2.5" data-path="data-frames.html"><a href="data-frames.html#reading-from-excel"><i class="fa fa-check"></i><b>7.2.5</b> Reading from Excel</a></li>
<li class="chapter" data-level="7.2.6" data-path="data-frames.html"><a href="data-frames.html#reading-from-the-web---1"><i class="fa fa-check"></i><b>7.2.6</b> Reading from the web - 1</a></li>
<li class="chapter" data-level="7.2.7" data-path="data-frames.html"><a href="data-frames.html#reading-from-the-web---2"><i class="fa fa-check"></i><b>7.2.7</b> Reading from the web - 2</a></li>
<li class="chapter" data-level="7.2.8" data-path="data-frames.html"><a href="data-frames.html#reading-from-a-database"><i class="fa fa-check"></i><b>7.2.8</b> Reading from a database</a></li>
<li class="chapter" data-level="7.2.9" data-path="data-frames.html"><a href="data-frames.html#read-some-data"><i class="fa fa-check"></i><b>7.2.9</b> Read some data</a></li>
<li class="chapter" data-level="7.2.10" data-path="data-frames.html"><a href="data-frames.html#questions-2"><i class="fa fa-check"></i><b>7.2.10</b> Questions</a></li>
<li class="chapter" data-level="7.2.11" data-path="data-frames.html"><a href="data-frames.html#answer"><i class="fa fa-check"></i><b>7.2.11</b> Answer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-visualization.html"><a href="basic-visualization.html"><i class="fa fa-check"></i><b>8</b> Basic Visualization</a><ul>
<li class="chapter" data-level="8.1" data-path="basic-visualization.html"><a href="basic-visualization.html#overview"><i class="fa fa-check"></i><b>8.1</b> Overview</a><ul>
<li class="chapter" data-level="8.1.1" data-path="basic-visualization.html"><a href="basic-visualization.html#common-geometric-objects"><i class="fa fa-check"></i><b>8.1.1</b> Common geometric objects</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="basic-visualization.html"><a href="basic-visualization.html#the-plot-function"><i class="fa fa-check"></i><b>8.2</b> The <code>plot</code> function</a><ul>
<li class="chapter" data-level="8.2.1" data-path="basic-visualization.html"><a href="basic-visualization.html#a-basic-scatter-plot"><i class="fa fa-check"></i><b>8.2.1</b> A basic scatter plot</a></li>
<li class="chapter" data-level="8.2.2" data-path="basic-visualization.html"><a href="basic-visualization.html#add-lines"><i class="fa fa-check"></i><b>8.2.2</b> Add lines</a></li>
<li class="chapter" data-level="8.2.3" data-path="basic-visualization.html"><a href="basic-visualization.html#histogram"><i class="fa fa-check"></i><b>8.2.3</b> Histogram</a></li>
<li class="chapter" data-level="8.2.4" data-path="basic-visualization.html"><a href="basic-visualization.html#density-plot"><i class="fa fa-check"></i><b>8.2.4</b> Density plot</a></li>
<li class="chapter" data-level="8.2.5" data-path="basic-visualization.html"><a href="basic-visualization.html#boxplot"><i class="fa fa-check"></i><b>8.2.5</b> Boxplot</a></li>
<li class="chapter" data-level="8.2.6" data-path="basic-visualization.html"><a href="basic-visualization.html#plotting-a-formula"><i class="fa fa-check"></i><b>8.2.6</b> Plotting a formula</a></li>
<li class="chapter" data-level="8.2.7" data-path="basic-visualization.html"><a href="basic-visualization.html#emphasizing-outliers"><i class="fa fa-check"></i><b>8.2.7</b> Emphasizing outliers</a></li>
<li class="chapter" data-level="8.2.8" data-path="basic-visualization.html"><a href="basic-visualization.html#other-ways-to-emphasize-outliers"><i class="fa fa-check"></i><b>8.2.8</b> Other ways to emphasize outliers</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="basic-visualization.html"><a href="basic-visualization.html#exercise-1"><i class="fa fa-check"></i><b>8.3</b> Exercise</a></li>
<li class="chapter" data-level="8.4" data-path="basic-visualization.html"><a href="basic-visualization.html#answer-1"><i class="fa fa-check"></i><b>8.4</b> Answer</a></li>
<li class="chapter" data-level="8.5" data-path="basic-visualization.html"><a href="basic-visualization.html#resources"><i class="fa fa-check"></i><b>8.5</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="loss-distributions.html"><a href="loss-distributions.html"><i class="fa fa-check"></i><b>9</b> Loss Distributions</a><ul>
<li class="chapter" data-level="9.1" data-path="loss-distributions.html"><a href="loss-distributions.html#packages-well-use"><i class="fa fa-check"></i><b>9.1</b> Packages we’ll use</a><ul>
<li class="chapter" data-level="9.1.1" data-path="loss-distributions.html"><a href="loss-distributions.html#statistical-distributions-in-r"><i class="fa fa-check"></i><b>9.1.1</b> Statistical distributions in R</a></li>
<li class="chapter" data-level="9.1.2" data-path="loss-distributions.html"><a href="loss-distributions.html#examples"><i class="fa fa-check"></i><b>9.1.2</b> Examples</a></li>
<li class="chapter" data-level="9.1.3" data-path="loss-distributions.html"><a href="loss-distributions.html#generate-some-loss-data"><i class="fa fa-check"></i><b>9.1.3</b> Generate some loss data</a></li>
<li class="chapter" data-level="9.1.4" data-path="loss-distributions.html"><a href="loss-distributions.html#histograms"><i class="fa fa-check"></i><b>9.1.4</b> Histograms</a></li>
<li class="chapter" data-level="9.1.5" data-path="loss-distributions.html"><a href="loss-distributions.html#density"><i class="fa fa-check"></i><b>9.1.5</b> Density</a></li>
<li class="chapter" data-level="9.1.6" data-path="loss-distributions.html"><a href="loss-distributions.html#fitdistr"><i class="fa fa-check"></i><b>9.1.6</b> <code>fitdistr</code></a></li>
<li class="chapter" data-level="9.1.7" data-path="loss-distributions.html"><a href="loss-distributions.html#q-q-plot"><i class="fa fa-check"></i><b>9.1.7</b> q-q plot</a></li>
<li class="chapter" data-level="9.1.8" data-path="loss-distributions.html"><a href="loss-distributions.html#compare-fit-to-histogram"><i class="fa fa-check"></i><b>9.1.8</b> Compare fit to histogram</a></li>
<li class="chapter" data-level="9.1.9" data-path="loss-distributions.html"><a href="loss-distributions.html#kolmogorov-smirnov"><i class="fa fa-check"></i><b>9.1.9</b> Kolmogorov-Smirnov</a></li>
<li class="chapter" data-level="9.1.10" data-path="loss-distributions.html"><a href="loss-distributions.html#more-k-s"><i class="fa fa-check"></i><b>9.1.10</b> More K-S</a></li>
<li class="chapter" data-level="9.1.11" data-path="loss-distributions.html"><a href="loss-distributions.html#direct-optimization"><i class="fa fa-check"></i><b>9.1.11</b> Direct optimization</a></li>
<li class="chapter" data-level="9.1.12" data-path="loss-distributions.html"><a href="loss-distributions.html#direct-optimization-1"><i class="fa fa-check"></i><b>9.1.12</b> Direct optimization</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="loss-distributions.html"><a href="loss-distributions.html#direct-optimization-2"><i class="fa fa-check"></i><b>9.2</b> Direct optimization</a><ul>
<li class="chapter" data-level="9.2.1" data-path="loss-distributions.html"><a href="loss-distributions.html#direct-optimization-3"><i class="fa fa-check"></i><b>9.2.1</b> Direct optimization</a></li>
<li class="chapter" data-level="9.2.2" data-path="loss-distributions.html"><a href="loss-distributions.html#questions-3"><i class="fa fa-check"></i><b>9.2.2</b> Questions</a></li>
<li class="chapter" data-level="9.2.3" data-path="loss-distributions.html"><a href="loss-distributions.html#answers-3"><i class="fa fa-check"></i><b>9.2.3</b> Answers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>10</b> Simulation</a><ul>
<li class="chapter" data-level="10.1" data-path="simulation.html"><a href="simulation.html#probability-distributions"><i class="fa fa-check"></i><b>10.1</b> Probability distributions</a><ul>
<li class="chapter" data-level="10.1.1" data-path="simulation.html"><a href="simulation.html#density-function"><i class="fa fa-check"></i><b>10.1.1</b> Density function</a></li>
<li class="chapter" data-level="10.1.2" data-path="simulation.html"><a href="simulation.html#a-couple-more"><i class="fa fa-check"></i><b>10.1.2</b> A couple more</a></li>
<li class="chapter" data-level="10.1.3" data-path="simulation.html"><a href="simulation.html#distribution-function"><i class="fa fa-check"></i><b>10.1.3</b> Distribution function</a></li>
<li class="chapter" data-level="10.1.4" data-path="simulation.html"><a href="simulation.html#density-and-distribution"><i class="fa fa-check"></i><b>10.1.4</b> Density and distribution</a></li>
<li class="chapter" data-level="10.1.5" data-path="simulation.html"><a href="simulation.html#random-number-generation"><i class="fa fa-check"></i><b>10.1.5</b> Random number generation</a></li>
<li class="chapter" data-level="10.1.6" data-path="simulation.html"><a href="simulation.html#more-random-number-generation"><i class="fa fa-check"></i><b>10.1.6</b> More random number generation</a></li>
<li class="chapter" data-level="10.1.7" data-path="simulation.html"><a href="simulation.html#sample-revisited"><i class="fa fa-check"></i><b>10.1.7</b> <code>sample</code> revisited</a></li>
<li class="chapter" data-level="10.1.8" data-path="simulation.html"><a href="simulation.html#compound-loss-distribution"><i class="fa fa-check"></i><b>10.1.8</b> Compound loss distribution</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="simulation.html"><a href="simulation.html#questions-4"><i class="fa fa-check"></i><b>10.2</b> Questions</a></li>
<li class="chapter" data-level="10.3" data-path="simulation.html"><a href="simulation.html#answers-4"><i class="fa fa-check"></i><b>10.3</b> Answers</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="advanced-visualization.html"><a href="advanced-visualization.html"><i class="fa fa-check"></i><b>11</b> Advanced Visualization</a><ul>
<li class="chapter" data-level="11.1" data-path="advanced-visualization.html"><a href="advanced-visualization.html#ggplot2"><i class="fa fa-check"></i><b>11.1</b> ggplot2</a><ul>
<li class="chapter" data-level="11.1.1" data-path="advanced-visualization.html"><a href="advanced-visualization.html#data"><i class="fa fa-check"></i><b>11.1.1</b> Data</a></li>
<li class="chapter" data-level="11.1.2" data-path="advanced-visualization.html"><a href="advanced-visualization.html#mapping"><i class="fa fa-check"></i><b>11.1.2</b> Mapping</a></li>
<li class="chapter" data-level="11.1.3" data-path="advanced-visualization.html"><a href="advanced-visualization.html#adding-layers"><i class="fa fa-check"></i><b>11.1.3</b> Adding layers</a></li>
<li class="chapter" data-level="11.1.4" data-path="advanced-visualization.html"><a href="advanced-visualization.html#typical-geoms"><i class="fa fa-check"></i><b>11.1.4</b> Typical geoms</a></li>
<li class="chapter" data-level="11.1.5" data-path="advanced-visualization.html"><a href="advanced-visualization.html#one-step"><i class="fa fa-check"></i><b>11.1.5</b> One step</a></li>
<li class="chapter" data-level="11.1.6" data-path="advanced-visualization.html"><a href="advanced-visualization.html#nothing-wrong-with-adding-two-layers"><i class="fa fa-check"></i><b>11.1.6</b> Nothing wrong with adding two layers</a></li>
<li class="chapter" data-level="11.1.7" data-path="advanced-visualization.html"><a href="advanced-visualization.html#facets"><i class="fa fa-check"></i><b>11.1.7</b> Facets</a></li>
<li class="chapter" data-level="11.1.8" data-path="advanced-visualization.html"><a href="advanced-visualization.html#statistical-transformations"><i class="fa fa-check"></i><b>11.1.8</b> Statistical transformations</a></li>
<li class="chapter" data-level="11.1.9" data-path="advanced-visualization.html"><a href="advanced-visualization.html#scales"><i class="fa fa-check"></i><b>11.1.9</b> Scales</a></li>
<li class="chapter" data-level="11.1.10" data-path="advanced-visualization.html"><a href="advanced-visualization.html#other-visual-elements"><i class="fa fa-check"></i><b>11.1.10</b> Other visual elements</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="advanced-visualization.html"><a href="advanced-visualization.html#questions-5"><i class="fa fa-check"></i><b>11.2</b> Questions</a></li>
<li class="chapter" data-level="11.3" data-path="advanced-visualization.html"><a href="advanced-visualization.html#answers-5"><i class="fa fa-check"></i><b>11.3</b> Answers</a></li>
<li class="chapter" data-level="11.4" data-path="advanced-visualization.html"><a href="advanced-visualization.html#maps"><i class="fa fa-check"></i><b>11.4</b> Maps!</a><ul>
<li class="chapter" data-level="11.4.1" data-path="advanced-visualization.html"><a href="advanced-visualization.html#hurricanes"><i class="fa fa-check"></i><b>11.4.1</b> Hurricanes</a></li>
<li class="chapter" data-level="11.4.2" data-path="advanced-visualization.html"><a href="advanced-visualization.html#choropleths-the-easy-way"><i class="fa fa-check"></i><b>11.4.2</b> Choropleths the easy way</a></li>
<li class="chapter" data-level="11.4.3" data-path="advanced-visualization.html"><a href="advanced-visualization.html#choropleths-the-harder-way"><i class="fa fa-check"></i><b>11.4.3</b> Choropleths the harder way</a></li>
<li class="chapter" data-level="11.4.4" data-path="advanced-visualization.html"><a href="advanced-visualization.html#choropleths-the-really-hard-way"><i class="fa fa-check"></i><b>11.4.4</b> Choropleths the really hard way</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="advanced-visualization.html"><a href="advanced-visualization.html#summary"><i class="fa fa-check"></i><b>11.5</b> Summary</a></li>
<li class="chapter" data-level="11.6" data-path="advanced-visualization.html"><a href="advanced-visualization.html#reference"><i class="fa fa-check"></i><b>11.6</b> Reference</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/PirateGrunt/raw_book" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">raw - R Actuarial Workshops</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-frames" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Data Frames</h1>
<p>Finally! This</p>
<p>By the end of this chapter you will know:</p>
<ul>
<li>What’s a data frame and how do I create one?</li>
<li>How do I read and write external data?</li>
</ul>
<div id="whats-a-data-frame" class="section level2">
<h2><span class="header-section-number">7.1</span> What’s a data frame?</h2>
<p>All of that about vectors and lists was prologue to this. The data frame is a seminal concept in R. Most statistical operations expect one and they are the most common way to pass data in and out of R.</p>
<p>Although critical to understand, this is very, very easy to get. What’s a data frame? It’s a table. That’s it. No, really, that’s it.</p>
<p>A data frame is a <code>list</code> of <code>vectors</code>. Each <code>vector</code> may have a different data type, but all must be the same length.</p>
<div id="creating-a-data-frame" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Creating a data frame</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1234</span>)
State =<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;TX&quot;</span>, <span class="st">&quot;NY&quot;</span>, <span class="st">&quot;CA&quot;</span>), <span class="dv">10</span>)
EarnedPremium =<span class="st"> </span><span class="kw">rlnorm</span>(<span class="kw">length</span>(State), <span class="dt">meanlog =</span> <span class="kw">log</span>(<span class="dv">50000</span>), <span class="dt">sdlog=</span><span class="dv">1</span>)
EarnedPremium =<span class="st"> </span><span class="kw">round</span>(EarnedPremium, -<span class="dv">3</span>)
Losses =<span class="st"> </span>EarnedPremium *<span class="st"> </span><span class="kw">runif</span>(<span class="kw">length</span>(EarnedPremium), <span class="dt">min=</span><span class="fl">0.4</span>, <span class="dt">max =</span> <span class="fl">0.9</span>)

df =<span class="st"> </span><span class="kw">data.frame</span>(State, EarnedPremium, Losses, <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="basic-properties-of-a-data-frame" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Basic properties of a data frame</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df)</code></pre></div>
<pre><code>##     State           EarnedPremium        Losses      
##  Length:30          Min.   :  5000   Min.   :  2034  
##  Class :character   1st Qu.: 21250   1st Qu.: 12461  
##  Mode  :character   Median : 30500   Median : 17363  
##                     Mean   : 61500   Mean   : 39006  
##                     3rd Qu.: 63750   3rd Qu.: 41465  
##                     Max.   :560000   Max.   :411179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df)</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    30 obs. of  3 variables:
##  $ State        : chr  &quot;TX&quot; &quot;NY&quot; &quot;CA&quot; &quot;TX&quot; ...
##  $ EarnedPremium: num  15000 66000 148000 5000 77000 83000 28000 29000 28000 21000 ...
##  $ Losses       : num  12486 27781 82671 2034 40002 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(df)</code></pre></div>
<pre><code>## [1] &quot;State&quot;         &quot;EarnedPremium&quot; &quot;Losses&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(df)</code></pre></div>
<pre><code>## [1] &quot;State&quot;         &quot;EarnedPremium&quot; &quot;Losses&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(df)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(df)</code></pre></div>
<pre><code>## [1] 30  3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(df)</code></pre></div>
<pre><code>## [1] 30</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(df)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(df)</code></pre></div>
<pre><code>##   State EarnedPremium    Losses
## 1    TX         15000 12486.254
## 2    NY         66000 27781.290
## 3    CA        148000 82671.479
## 4    TX          5000  2034.375
## 5    NY         77000 40002.490
## 6    CA         83000 62519.527</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(df, <span class="dv">2</span>)</code></pre></div>
<pre><code>##   State EarnedPremium   Losses
## 1    TX         15000 12486.25
## 2    NY         66000 27781.29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(df)</code></pre></div>
<pre><code>##    State EarnedPremium    Losses
## 25    TX         25000 12452.183
## 26    NY         12000 10191.483
## 27    CA         89000 52932.740
## 28    TX         18000  9997.837
## 29    NY         49000 23520.702
## 30    CA         20000 16961.858</code></pre>
</div>
<div id="referencing" class="section level3">
<h3><span class="header-section-number">7.1.3</span> Referencing</h3>
<p>Very similar to referencing a 2D matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">2</span>,<span class="dv">3</span>]
df[<span class="dv">2</span>]
df[<span class="dv">2</span>,]
df[<span class="dv">2</span>, -<span class="dv">1</span>]</code></pre></div>
<p>Note the <code>$</code> operator to access named columns. A data frame uses the ‘name’ metadata in the same way as a list.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$EarnedPremium
<span class="co"># Columns of a data frame may be treated as vectors</span>
df$EarnedPremium[<span class="dv">3</span>]
df[<span class="dv">2</span>:<span class="dv">4</span>, <span class="dv">1</span>:<span class="dv">2</span>]
df[, <span class="st">&quot;EarnedPremium&quot;</span>]
df[, <span class="kw">c</span>(<span class="st">&quot;EarnedPremium&quot;</span>, <span class="st">&quot;State&quot;</span>)]</code></pre></div>
</div>
<div id="ordering" class="section level3">
<h3><span class="header-section-number">7.1.4</span> Ordering</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">order</span>(df$EarnedPremium)</code></pre></div>
<pre><code>##  [1]  4 26  1 12 28 18 30 10 19 13 25  7  9  8 17 11 22 23 16 29 14 21  2
## [24]  5 24  6 27 15  3 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df =<span class="st"> </span>df[<span class="kw">order</span>(df$EarnedPremium), ]</code></pre></div>
</div>
<div id="altering-and-adding-columns" class="section level3">
<h3><span class="header-section-number">7.1.5</span> Altering and adding columns</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$LossRatio =<span class="st"> </span>df$EarnedPremium /<span class="st"> </span>df$Losses
df$LossRatio =<span class="st"> </span><span class="dv">1</span> /<span class="st"> </span>df$LossRatio</code></pre></div>
</div>
<div id="eliminating-columns" class="section level3">
<h3><span class="header-section-number">7.1.6</span> Eliminating columns</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$LossRatio =<span class="st"> </span><span class="ot">NULL</span>
df =<span class="st"> </span>df[, <span class="dv">1</span>:<span class="dv">2</span>]</code></pre></div>
</div>
<div id="rbind-cbind" class="section level3">
<h3><span class="header-section-number">7.1.7</span> rbind, cbind</h3>
<p><code>rbind</code> will append rows to the data frame. New rows must have the same number of columns and data types. <code>cbind</code> must have the same number of rows as the data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfA =<span class="st"> </span>df[<span class="dv">1</span>:<span class="dv">10</span>,]
dfB =<span class="st"> </span>df[<span class="dv">11</span>:<span class="dv">20</span>, ]
<span class="kw">rbind</span>(dfA, dfB)
dfC =<span class="st"> </span>dfA[, <span class="dv">1</span>:<span class="dv">2</span>]
<span class="kw">cbind</span>(dfA, dfC)</code></pre></div>
</div>
<div id="merging" class="section level3">
<h3><span class="header-section-number">7.1.8</span> Merging</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfRateChange =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">State =</span><span class="kw">c</span>(<span class="st">&quot;TX&quot;</span>, <span class="st">&quot;CA&quot;</span>, <span class="st">&quot;NY&quot;</span>), <span class="dt">RateChange =</span> <span class="kw">c</span>(.<span class="dv">05</span>, -.<span class="dv">1</span>, .<span class="dv">2</span>))
df =<span class="st"> </span><span class="kw">merge</span>(df, dfRateChange)</code></pre></div>
<p>Merging is VLOOKUP on steroids. Basically equivalent to a JOIN in SQL.</p>
</div>
<div id="altering-column-names" class="section level3">
<h3><span class="header-section-number">7.1.9</span> Altering column names</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$LossRation =<span class="st"> </span><span class="kw">with</span>(df, Losses /<span class="st"> </span>EarnedPremium)
<span class="kw">names</span>(df)</code></pre></div>
<pre><code>## [1] &quot;State&quot;         &quot;EarnedPremium&quot; &quot;RateChange&quot;    &quot;LossRation&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(df)[<span class="dv">4</span>] =<span class="st"> &quot;Loss Ratio&quot;</span>
<span class="kw">colnames</span>(df)</code></pre></div>
<pre><code>## [1] &quot;State&quot;         &quot;EarnedPremium&quot; &quot;RateChange&quot;    &quot;Loss Ratio&quot;</code></pre>
</div>
<div id="subsetting---the-easy-way" class="section level3">
<h3><span class="header-section-number">7.1.10</span> Subsetting - The easy way</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfTX =<span class="st"> </span><span class="kw">subset</span>(df, State ==<span class="st"> &quot;TX&quot;</span>)
dfBigPolicies =<span class="st"> </span><span class="kw">subset</span>(df, EarnedPremium &gt;=<span class="st"> </span><span class="dv">50000</span>)</code></pre></div>
</div>
<div id="subsetting---the-hardish-way" class="section level3">
<h3><span class="header-section-number">7.1.11</span> Subsetting - The hard(ish) way</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfTX =<span class="st"> </span>df[df$State ==<span class="st"> &quot;TX&quot;</span>, ]
dfBigPolicies =<span class="st"> </span>df[df$EarnedPremium &gt;=<span class="st"> </span><span class="dv">50000</span>, ]</code></pre></div>
</div>
<div id="subsetting---yet-another-way" class="section level3">
<h3><span class="header-section-number">7.1.12</span> Subsetting - Yet another way</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">whichState =<span class="st"> </span>df$State ==<span class="st"> &quot;TX&quot;</span>
dfTX =<span class="st"> </span>df[whichState, ]

whichEP =<span class="st"> </span>df$EarnedPremium &gt;=<span class="st"> </span><span class="dv">50000</span>
dfBigPolicies =<span class="st"> </span>df[whichEP, ]</code></pre></div>
<p>I use each of these three methods routinely. They’re all good.</p>
</div>
</div>
<div id="summarizing" class="section level2">
<h2><span class="header-section-number">7.2</span> Summarizing</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(df$EarnedPremium)</code></pre></div>
<pre><code>## [1] 1845000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(df$EarnedPremium[df$State ==<span class="st"> &quot;TX&quot;</span>])</code></pre></div>
<pre><code>## [1] 233000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(df[,-<span class="dv">1</span>], <span class="kw">list</span>(df$State), sum)</code></pre></div>
<pre><code>##   Group.1 EarnedPremium RateChange Loss Ratio
## 1      CA        673000       -1.0   8.257125
## 2      NY        939000        2.0  11.755127
## 3      TX        233000        0.5  18.745791</code></pre>
<div id="summarizing-visually---1" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Summarizing visually - 1</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfByState =<span class="st"> </span><span class="kw">aggregate</span>(df$EarnedPremium, <span class="kw">list</span>(df$State), sum)
<span class="kw">colnames</span>(dfByState) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;State&quot;</span>, <span class="st">&quot;EarnedPremium&quot;</span>)
<span class="kw">barplot</span>(dfByState$EarnedPremium, <span class="dt">names.arg=</span>dfByState$State, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</code></pre></div>
<p><img src="raw_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
</div>
<div id="summarizing-visually---2" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Summarizing visually - 2</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(dfByState$EarnedPremium, dfByState$State, <span class="dt">pch=</span><span class="dv">19</span>)</code></pre></div>
<p><img src="raw_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
</div>
<div id="advanced-data-frame-tools" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Advanced data frame tools</h3>
<ul>
<li>dplyr</li>
<li>tidyr</li>
<li>reshape2</li>
<li>data.table</li>
</ul>
<p>Roughly 90% of your work in R will involve manipulation of data frames. There are truckloads of packages designed to make manipulation of data frames easier. Take your time getting to learn these tools. They’re all powerful, but they’re all a little different. I’d suggest learning the functions in <code>base</code> R first, then moving on to tools like <code>dplyr</code> and <code>data.table</code>. There’s a lot to be gained from understanding the problems those packages were created to solve.</p>
</div>
<div id="reading-data" class="section level3">
<h3><span class="header-section-number">7.2.4</span> Reading data</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myData =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;SomeFile.csv&quot;</span>)</code></pre></div>
</div>
<div id="reading-from-excel" class="section level3">
<h3><span class="header-section-number">7.2.5</span> Reading from Excel</h3>
<p>Actually there are several ways: * XLConnect * xlsx * Excelsi-r</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(XLConnect)
wbk =<span class="st"> </span><span class="kw">loadWorkbook</span>(<span class="st">&quot;myWorkbook.xlsx&quot;</span>)
df =<span class="st"> </span><span class="kw">readWorksheet</span>(wbk, someSheet)</code></pre></div>
</div>
<div id="reading-from-the-web---1" class="section level3">
<h3><span class="header-section-number">7.2.6</span> Reading from the web - 1</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">URL =<span class="st"> &quot;http://www.casact.org/research/reserve_data/ppauto_pos.csv&quot;</span>
df =<span class="st"> </span><span class="kw">read.csv</span>(URL, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="reading-from-the-web---2" class="section level3">
<h3><span class="header-section-number">7.2.7</span> Reading from the web - 2</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(XML)
URL =<span class="st"> &quot;http://www.pro-football-reference.com/teams/nyj/2012_games.htm&quot;</span>
games =<span class="st"> </span><span class="kw">readHTMLTable</span>(URL, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="reading-from-a-database" class="section level3">
<h3><span class="header-section-number">7.2.8</span> Reading from a database</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RODBC)
myChannel =<span class="st"> </span><span class="kw">odbcConnect</span>(<span class="dt">dsn =</span> <span class="st">&quot;MyDSN_Name&quot;</span>)
df =<span class="st"> </span><span class="kw">sqlQuery</span>(myChannel, <span class="st">&quot;SELECT stuff FROM myTable&quot;</span>)</code></pre></div>
</div>
<div id="read-some-data" class="section level3">
<h3><span class="header-section-number">7.2.9</span> Read some data</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../data-raw/StateData.csv&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(df)</code></pre></div>
</div>
<div id="questions-2" class="section level3">
<h3><span class="header-section-number">7.2.10</span> Questions</h3>
<ul>
<li>Load the data from “StateData.csv” into a data frame.</li>
<li>Which state has the most premium?</li>
</ul>
</div>
<div id="answer" class="section level3">
<h3><span class="header-section-number">7.2.11</span> Answer</h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lists.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basic-visualization.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/PirateGrunt/raw_book/edit/master/40_Data.Rmd",
"text": null
},
"download": ["raw.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
