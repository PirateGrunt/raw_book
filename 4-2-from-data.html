<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="raw - R Actuarial Workshops" />
<meta property="og:type" content="book" />


<meta property="og:description" content="This is a companion to actuarial workshops." />
<meta name="github-repo" content="PirateGrunt/raw_book" />

<meta name="author" content="Brian A. Fannin, ACAS" />

<meta name="date" content="2016-07-13" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="This is a companion to actuarial workshops.">

<title>raw - R Actuarial Workshops</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="1-1-why-does-this-book-exist.html#why-does-this-book-exist"><span class="toc-section-number">1.1</span> Why does this book exist?</a></li>
<li><a href="1-2-who-should-use-this.html#who-should-use-this"><span class="toc-section-number">1.2</span> Who should use this?</a></li>
<li><a href="1-3-other-stuff.html#other-stuff"><span class="toc-section-number">1.3</span> Other stuff</a></li>
</ul></li>
<li class="has-sub"><a href="2-setup.html#setup"><span class="toc-section-number">2</span> Setup</a><ul>
<li class="has-sub"><a href="2-1-installation.html#installation"><span class="toc-section-number">2.1</span> Installation</a><ul>
<li><a href="2-1-installation.html#it"><span class="toc-section-number">2.1.1</span> IT</a></li>
</ul></li>
<li class="has-sub"><a href="2-2-the-operating-environment.html#the-operating-environment"><span class="toc-section-number">2.2</span> The Operating Environment</a><ul>
<li><a href="2-2-the-operating-environment.html#command-line-interface"><span class="toc-section-number">2.2.1</span> Command-line interface</a></li>
</ul></li>
<li><a href="2-3-entering-commands.html#entering-commands"><span class="toc-section-number">2.3</span> Entering Commands</a></li>
</ul></li>
<li class="has-sub"><a href="3-getting-started.html#getting-started"><span class="toc-section-number">3</span> Getting started</a><ul>
<li><a href="3-getting-started.html#mathematical-operators"><span class="toc-section-number">3.0.1</span> Mathematical Operators</a></li>
<li><a href="3-getting-started.html#logical-operators"><span class="toc-section-number">3.0.2</span> Logical Operators</a></li>
<li><a href="3-getting-started.html#assignment"><span class="toc-section-number">3.0.3</span> Assignment</a></li>
<li><a href="3-getting-started.html#functions"><span class="toc-section-number">3.0.4</span> Functions</a></li>
<li><a href="3-getting-started.html#a-few-mathematical-functions"><span class="toc-section-number">3.0.5</span> A few mathematical functions</a></li>
<li><a href="3-1-getting-help.html#getting-help"><span class="toc-section-number">3.1</span> Getting help</a></li>
<li class="has-sub"><a href="3-2-the-working-directory.html#the-working-directory"><span class="toc-section-number">3.2</span> The working directory</a><ul>
<li><a href="3-2-the-working-directory.html#directory-paths"><span class="toc-section-number">3.2.1</span> Directory paths</a></li>
<li><a href="3-2-the-working-directory.html#source-files"><span class="toc-section-number">3.2.2</span> Source files</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-your-first-script.html#your-first-script"><span class="toc-section-number">3.3</span> Your first script</a><ul>
<li><a href="3-3-your-first-script.html#executing-a-script"><span class="toc-section-number">3.3.1</span> Executing a script</a></li>
<li><a href="3-3-your-first-script.html#comments"><span class="toc-section-number">3.3.2</span> Comments</a></li>
</ul></li>
<li><a href="3-4-quiz.html#quiz"><span class="toc-section-number">3.4</span> Quiz</a></li>
</ul></li>
<li class="has-sub"><a href="4-vectors.html#vectors"><span class="toc-section-number">4</span> Vectors</a><ul>
<li class="has-sub"><a href="4-1-what-is-a-vector.html#what-is-a-vector"><span class="toc-section-number">4.1</span> What is a vector?</a><ul>
<li><a href="4-1-what-is-a-vector.html#vector-properties"><span class="toc-section-number">4.1.1</span> Vector properties</a></li>
<li><a href="4-1-what-is-a-vector.html#vector-construction"><span class="toc-section-number">4.1.2</span> Vector construction</a></li>
<li><a href="4-1-what-is-a-vector.html#seq"><span class="toc-section-number">4.1.3</span> <code>seq</code></a></li>
<li><a href="4-1-what-is-a-vector.html#rep"><span class="toc-section-number">4.1.4</span> <code>rep</code></a></li>
<li><a href="4-1-what-is-a-vector.html#concatenation"><span class="toc-section-number">4.1.5</span> Concatenation</a></li>
<li><a href="4-1-what-is-a-vector.html#growth-by-assignment"><span class="toc-section-number">4.1.6</span> Growth by assignment</a></li>
<li><a href="4-1-what-is-a-vector.html#vector-access---by-index"><span class="toc-section-number">4.1.7</span> Vector access - by index</a></li>
<li><a href="4-1-what-is-a-vector.html#vector-access---logical-access"><span class="toc-section-number">4.1.8</span> Vector access - logical access</a></li>
<li><a href="4-1-what-is-a-vector.html#which"><span class="toc-section-number">4.1.9</span> <code>which</code></a></li>
<li><a href="4-1-what-is-a-vector.html#sample"><span class="toc-section-number">4.1.10</span> <code>sample</code></a></li>
<li><a href="4-1-what-is-a-vector.html#sample-ii"><span class="toc-section-number">4.1.11</span> <code>sample</code> II</a></li>
<li><a href="4-1-what-is-a-vector.html#order"><span class="toc-section-number">4.1.12</span> <code>order</code></a></li>
<li><a href="4-1-what-is-a-vector.html#vector-arithmetic"><span class="toc-section-number">4.1.13</span> Vector arithmetic</a></li>
<li><a href="4-1-what-is-a-vector.html#recycling"><span class="toc-section-number">4.1.14</span> Recycling</a></li>
<li><a href="4-1-what-is-a-vector.html#set-theory---part-i"><span class="toc-section-number">4.1.15</span> Set theory - Part I</a></li>
<li><a href="4-1-what-is-a-vector.html#set-theory---part-ii"><span class="toc-section-number">4.1.16</span> Set theory - Part II</a></li>
<li><a href="4-1-what-is-a-vector.html#summarization"><span class="toc-section-number">4.1.17</span> Summarization</a></li>
<li><a href="4-1-what-is-a-vector.html#vectors-1"><span class="toc-section-number">4.1.18</span> Vectors</a></li>
</ul></li>
<li class="has-sub"><a href="4-2-from-data.html#from-data"><span class="toc-section-number">4.2</span> From data</a><ul>
<li><a href="4-2-from-data.html#data-types"><span class="toc-section-number">4.2.1</span> Data types</a></li>
<li><a href="4-2-from-data.html#what-is-it"><span class="toc-section-number">4.2.2</span> What is it?</a></li>
<li><a href="4-2-from-data.html#data-conversion"><span class="toc-section-number">4.2.3</span> Data conversion</a></li>
<li><a href="4-2-from-data.html#class"><span class="toc-section-number">4.2.4</span> Class</a></li>
<li><a href="4-2-from-data.html#mode"><span class="toc-section-number">4.2.5</span> Mode</a></li>
<li><a href="4-2-from-data.html#dates-and-times"><span class="toc-section-number">4.2.6</span> Dates and times</a></li>
<li><a href="4-2-from-data.html#more-on-dates"><span class="toc-section-number">4.2.7</span> More on dates</a></li>
<li><a href="4-2-from-data.html#what-day-is-it"><span class="toc-section-number">4.2.8</span> What day is it?</a></li>
<li><a href="4-2-from-data.html#more-reading-on-dates"><span class="toc-section-number">4.2.9</span> More reading on dates</a></li>
<li><a href="4-2-from-data.html#factors"><span class="toc-section-number">4.2.10</span> Factors</a></li>
<li><a href="4-2-from-data.html#altering-factors"><span class="toc-section-number">4.2.11</span> Altering factors</a></li>
<li><a href="4-2-from-data.html#avoid-factors"><span class="toc-section-number">4.2.12</span> Avoid factors</a></li>
<li><a href="4-2-from-data.html#questions"><span class="toc-section-number">4.2.13</span> Questions</a></li>
<li><a href="4-2-from-data.html#answers"><span class="toc-section-number">4.2.14</span> Answers</a></li>
<li><a href="4-2-from-data.html#from-vectors-to-matrices-and-lists"><span class="toc-section-number">4.2.15</span> From vectors to matrices and lists</a></li>
<li><a href="4-2-from-data.html#a-matrix"><span class="toc-section-number">4.2.16</span> A matrix</a></li>
<li><a href="4-2-from-data.html#section"><span class="toc-section-number">4.2.17</span> </a></li>
<li><a href="4-2-from-data.html#section-1"><span class="toc-section-number">4.2.18</span> </a></li>
<li><a href="4-2-from-data.html#matrix-metadata"><span class="toc-section-number">4.2.19</span> Matrix metadata</a></li>
<li><a href="4-2-from-data.html#data-access-for-a-matrix"><span class="toc-section-number">4.2.20</span> Data access for a matrix</a></li>
<li><a href="4-2-from-data.html#data-access-continued"><span class="toc-section-number">4.2.21</span> Data access continued</a></li>
<li><a href="4-2-from-data.html#matrix-summary"><span class="toc-section-number">4.2.22</span> Matrix summary</a></li>
<li><a href="4-2-from-data.html#more-than-two-dimensions"><span class="toc-section-number">4.2.23</span> More than two dimensions</a></li>
</ul></li>
<li><a href="4-3-exercise.html#exercise"><span class="toc-section-number">4.3</span> Exercise</a></li>
<li class="has-sub"><a href="4-4-answers-1.html#answers-1"><span class="toc-section-number">4.4</span> Answers</a><ul>
<li><a href="4-4-answers-1.html#next"><span class="toc-section-number">4.4.1</span> Next</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="5-lists.html#lists"><span class="toc-section-number">5</span> Lists</a><ul>
<li><a href="5-lists.html#lists-1"><span class="toc-section-number">5.0.1</span> Lists</a></li>
<li><a href="5-lists.html#vs."><span class="toc-section-number">5.0.2</span> [ vs. [[</a></li>
<li><a href="5-lists.html#recursive-storage"><span class="toc-section-number">5.0.3</span> Recursive storage</a></li>
<li><a href="5-lists.html#list-metadata"><span class="toc-section-number">5.0.4</span> List metadata</a></li>
<li><a href="5-lists.html#lapply"><span class="toc-section-number">5.0.5</span> <code>lapply</code></a></li>
<li><a href="5-lists.html#why-lapply"><span class="toc-section-number">5.0.6</span> Why <code>lapply</code>?</a></li>
<li><a href="5-lists.html#summary-functions"><span class="toc-section-number">5.0.7</span> Summary functions</a></li>
<li><a href="5-1-questions-1.html#questions-1"><span class="toc-section-number">5.1</span> Questions</a></li>
<li><a href="5-2-answers-2.html#answers-2"><span class="toc-section-number">5.2</span> Answers</a></li>
</ul></li>
<li class="has-sub"><a href="6-data-frames.html#data-frames"><span class="toc-section-number">6</span> Data Frames</a><ul>
<li class="has-sub"><a href="6-1-whats-a-data-frame.html#whats-a-data-frame"><span class="toc-section-number">6.1</span> What’s a data frame?</a><ul>
<li><a href="6-1-whats-a-data-frame.html#creating-a-data-frame"><span class="toc-section-number">6.1.1</span> Creating a data frame</a></li>
<li><a href="6-1-whats-a-data-frame.html#basic-properties-of-a-data-frame"><span class="toc-section-number">6.1.2</span> Basic properties of a data frame</a></li>
<li><a href="6-1-whats-a-data-frame.html#referencing"><span class="toc-section-number">6.1.3</span> Referencing</a></li>
<li><a href="6-1-whats-a-data-frame.html#ordering"><span class="toc-section-number">6.1.4</span> Ordering</a></li>
<li><a href="6-1-whats-a-data-frame.html#altering-and-adding-columns"><span class="toc-section-number">6.1.5</span> Altering and adding columns</a></li>
<li><a href="6-1-whats-a-data-frame.html#eliminating-columns"><span class="toc-section-number">6.1.6</span> Eliminating columns</a></li>
<li><a href="6-1-whats-a-data-frame.html#rbind-cbind"><span class="toc-section-number">6.1.7</span> rbind, cbind</a></li>
<li><a href="6-1-whats-a-data-frame.html#merging"><span class="toc-section-number">6.1.8</span> Merging</a></li>
<li><a href="6-1-whats-a-data-frame.html#altering-column-names"><span class="toc-section-number">6.1.9</span> Altering column names</a></li>
<li><a href="6-1-whats-a-data-frame.html#subsetting---the-easy-way"><span class="toc-section-number">6.1.10</span> Subsetting - The easy way</a></li>
<li><a href="6-1-whats-a-data-frame.html#subsetting---the-hardish-way"><span class="toc-section-number">6.1.11</span> Subsetting - The hard(ish) way</a></li>
<li><a href="6-1-whats-a-data-frame.html#subsetting---yet-another-way"><span class="toc-section-number">6.1.12</span> Subsetting - Yet another way</a></li>
</ul></li>
<li class="has-sub"><a href="6-2-summarizing.html#summarizing"><span class="toc-section-number">6.2</span> Summarizing</a><ul>
<li><a href="6-2-summarizing.html#summarizing-visually---1"><span class="toc-section-number">6.2.1</span> Summarizing visually - 1</a></li>
<li><a href="6-2-summarizing.html#summarizing-visually---2"><span class="toc-section-number">6.2.2</span> Summarizing visually - 2</a></li>
<li><a href="6-2-summarizing.html#advanced-data-frame-tools"><span class="toc-section-number">6.2.3</span> Advanced data frame tools</a></li>
<li><a href="6-2-summarizing.html#reading-data"><span class="toc-section-number">6.2.4</span> Reading data</a></li>
<li><a href="6-2-summarizing.html#reading-from-excel"><span class="toc-section-number">6.2.5</span> Reading from Excel</a></li>
<li><a href="6-2-summarizing.html#reading-from-the-web---1"><span class="toc-section-number">6.2.6</span> Reading from the web - 1</a></li>
<li><a href="6-2-summarizing.html#reading-from-the-web---2"><span class="toc-section-number">6.2.7</span> Reading from the web - 2</a></li>
<li><a href="6-2-summarizing.html#reading-from-a-database"><span class="toc-section-number">6.2.8</span> Reading from a database</a></li>
<li><a href="6-2-summarizing.html#read-some-data"><span class="toc-section-number">6.2.9</span> Read some data</a></li>
<li><a href="6-2-summarizing.html#questions-2"><span class="toc-section-number">6.2.10</span> Questions</a></li>
<li><a href="6-2-summarizing.html#answer"><span class="toc-section-number">6.2.11</span> Answer</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="7-basic-visualization.html#basic-visualization"><span class="toc-section-number">7</span> Basic Visualization</a><ul>
<li><a href="7-basic-visualization.html#visualization-in-r"><span class="toc-section-number">7.0.1</span> Visualization in R</a></li>
<li><a href="7-basic-visualization.html#common-geometric-objects"><span class="toc-section-number">7.0.2</span> Common geometric objects</a></li>
<li><a href="7-basic-visualization.html#a-basic-scatter-plot"><span class="toc-section-number">7.0.3</span> A basic scatter plot</a></li>
<li><a href="7-basic-visualization.html#add-lines"><span class="toc-section-number">7.0.4</span> Add lines</a></li>
<li><a href="7-basic-visualization.html#histogram"><span class="toc-section-number">7.0.5</span> Histogram</a></li>
<li><a href="7-basic-visualization.html#density-plot"><span class="toc-section-number">7.0.6</span> Density plot</a></li>
<li><a href="7-basic-visualization.html#boxplot"><span class="toc-section-number">7.0.7</span> Boxplot</a></li>
<li><a href="7-basic-visualization.html#plotting-a-formula"><span class="toc-section-number">7.0.8</span> Plotting a formula</a></li>
<li><a href="7-basic-visualization.html#emphasizing-outliers"><span class="toc-section-number">7.0.9</span> Emphasizing outliers</a></li>
<li><a href="7-basic-visualization.html#other-ways-to-emphasize-outliers"><span class="toc-section-number">7.0.10</span> Other ways to emphasize outliers</a></li>
<li><a href="7-1-exercise-1.html#exercise-1"><span class="toc-section-number">7.1</span> Exercise</a></li>
<li><a href="7-2-answer-1.html#answer-1"><span class="toc-section-number">7.2</span> Answer</a></li>
<li><a href="7-3-resources.html#resources"><span class="toc-section-number">7.3</span> Resources</a></li>
</ul></li>
<li class="has-sub"><a href="8-loss-distributions.html#loss-distributions"><span class="toc-section-number">8</span> Loss Distributions</a><ul>
<li><a href="8-loss-distributions.html#packages-well-use"><span class="toc-section-number">8.0.1</span> Packages we’ll use</a></li>
<li><a href="8-loss-distributions.html#statistical-distributions-in-r"><span class="toc-section-number">8.0.2</span> Statistical distributions in R</a></li>
<li><a href="8-loss-distributions.html#examples"><span class="toc-section-number">8.0.3</span> Examples</a></li>
<li><a href="8-loss-distributions.html#generate-some-loss-data"><span class="toc-section-number">8.0.4</span> Generate some loss data</a></li>
<li><a href="8-loss-distributions.html#histograms"><span class="toc-section-number">8.0.5</span> Histograms</a></li>
<li><a href="8-loss-distributions.html#density"><span class="toc-section-number">8.0.6</span> Density</a></li>
<li><a href="8-loss-distributions.html#fitdistr"><span class="toc-section-number">8.0.7</span> <code>fitdistr</code></a></li>
<li><a href="8-loss-distributions.html#q-q-plot"><span class="toc-section-number">8.0.8</span> q-q plot</a></li>
<li><a href="8-loss-distributions.html#compare-fit-to-histogram"><span class="toc-section-number">8.0.9</span> Compare fit to histogram</a></li>
<li><a href="8-loss-distributions.html#kolmogorov-smirnov"><span class="toc-section-number">8.0.10</span> Kolmogorov-Smirnov</a></li>
<li><a href="8-loss-distributions.html#more-k-s"><span class="toc-section-number">8.0.11</span> More K-S</a></li>
<li><a href="8-loss-distributions.html#direct-optimization"><span class="toc-section-number">8.0.12</span> Direct optimization</a></li>
<li><a href="8-loss-distributions.html#direct-optimization-1"><span class="toc-section-number">8.0.13</span> Direct optimization</a></li>
<li class="has-sub"><a href="8-1-direct-optimization-2.html#direct-optimization-2"><span class="toc-section-number">8.1</span> Direct optimization</a><ul>
<li><a href="8-1-direct-optimization-2.html#direct-optimization-3"><span class="toc-section-number">8.1.1</span> Direct optimization</a></li>
<li><a href="8-1-direct-optimization-2.html#questions-3"><span class="toc-section-number">8.1.2</span> Questions</a></li>
<li><a href="8-1-direct-optimization-2.html#answers-3"><span class="toc-section-number">8.1.3</span> Answers</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="9-simulation.html#simulation"><span class="toc-section-number">9</span> Simulation</a><ul>
<li><a href="9-simulation.html#probability-distributions"><span class="toc-section-number">9.0.1</span> Probability distributions</a></li>
<li><a href="9-simulation.html#density-function"><span class="toc-section-number">9.0.2</span> Density function</a></li>
<li><a href="9-simulation.html#a-couple-more"><span class="toc-section-number">9.0.3</span> A couple more</a></li>
<li><a href="9-simulation.html#distribution-function"><span class="toc-section-number">9.0.4</span> Distribution function</a></li>
<li><a href="9-simulation.html#density-and-distribution"><span class="toc-section-number">9.0.5</span> Density and distribution</a></li>
<li><a href="9-simulation.html#random-number-generation"><span class="toc-section-number">9.0.6</span> Random number generation</a></li>
<li><a href="9-simulation.html#more-random-number-generation"><span class="toc-section-number">9.0.7</span> More random number generation</a></li>
<li><a href="9-simulation.html#sample-revisited"><span class="toc-section-number">9.0.8</span> <code>sample</code> revisited</a></li>
<li><a href="9-simulation.html#compound-loss-distribution"><span class="toc-section-number">9.0.9</span> Compound loss distribution</a></li>
<li><a href="9-1-questions-4.html#questions-4"><span class="toc-section-number">9.1</span> Questions</a></li>
<li><a href="9-2-answers-4.html#answers-4"><span class="toc-section-number">9.2</span> Answers</a></li>
<li><a href="9-3-section-2.html#section-2"><span class="toc-section-number">9.3</span> </a></li>
</ul></li>
<li class="has-sub"><a href="10-advanced-visualization.html#advanced-visualization"><span class="toc-section-number">10</span> Advanced Visualization</a><ul>
<li><a href="10-advanced-visualization.html#ggplot2"><span class="toc-section-number">10.0.1</span> ggplot2</a></li>
<li><a href="10-advanced-visualization.html#data"><span class="toc-section-number">10.0.2</span> Data</a></li>
<li><a href="10-advanced-visualization.html#mapping"><span class="toc-section-number">10.0.3</span> Mapping</a></li>
<li><a href="10-advanced-visualization.html#adding-layers"><span class="toc-section-number">10.0.4</span> Adding layers</a></li>
<li><a href="10-advanced-visualization.html#typical-geoms"><span class="toc-section-number">10.0.5</span> Typical geoms</a></li>
<li><a href="10-advanced-visualization.html#one-step"><span class="toc-section-number">10.0.6</span> One step</a></li>
<li><a href="10-advanced-visualization.html#nothing-wrong-with-adding-two-layers"><span class="toc-section-number">10.0.7</span> Nothing wrong with adding two layers</a></li>
<li><a href="10-advanced-visualization.html#facets"><span class="toc-section-number">10.0.8</span> Facets</a></li>
<li><a href="10-advanced-visualization.html#statistical-transformations"><span class="toc-section-number">10.0.9</span> Statistical transformations</a></li>
<li><a href="10-advanced-visualization.html#scales"><span class="toc-section-number">10.0.10</span> Scales</a></li>
<li><a href="10-advanced-visualization.html#other-visual-elements"><span class="toc-section-number">10.0.11</span> Other visual elements</a></li>
<li><a href="10-1-questions-5.html#questions-5"><span class="toc-section-number">10.1</span> Questions</a></li>
<li><a href="10-2-answers-5.html#answers-5"><span class="toc-section-number">10.2</span> Answers</a></li>
<li class="has-sub"><a href="10-3-maps.html#maps"><span class="toc-section-number">10.3</span> Maps!</a><ul>
<li><a href="10-3-maps.html#hurricanes"><span class="toc-section-number">10.3.1</span> Hurricanes</a></li>
<li><a href="10-3-maps.html#choropleths-the-easy-way"><span class="toc-section-number">10.3.2</span> Choropleths the easy way</a></li>
<li><a href="10-3-maps.html#choropleths-the-harder-way"><span class="toc-section-number">10.3.3</span> Choropleths the harder way</a></li>
<li><a href="10-3-maps.html#choropleths-the-really-hard-way"><span class="toc-section-number">10.3.4</span> Choropleths the really hard way</a></li>
</ul></li>
<li><a href="10-4-summary.html#summary"><span class="toc-section-number">10.4</span> Summary</a></li>
<li><a href="10-5-reference.html#reference"><span class="toc-section-number">10.5</span> Reference</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="from-data" class="section level2">
<h2><span class="header-section-number">4.2</span> From data</h2>
<ul>
<li>Data types</li>
<li>From vectors to matrices and lists</li>
</ul>
<div id="data-types" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Data types</h3>
<ul>
<li>logical</li>
<li>integer</li>
<li>double</li>
<li>character</li>
</ul>
</div>
<div id="what-is-it" class="section level3">
<h3><span class="header-section-number">4.2.2</span> What is it?</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">6</span>
y &lt;-<span class="st"> </span>6L
z &lt;-<span class="st"> </span><span class="ot">TRUE</span>
<span class="kw">typeof</span>(x)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(y)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(z)</code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.logical</span>(x)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.double</span>(x)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="data-conversion" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Data conversion</h3>
<p>Most conversion is implicit. For explicit conversion, use the <code>as.*</code> functions.</p>
<p>Implicit conversion alters everything to the most complex form of data present as follows:</p>
<p>logical -&gt; integer -&gt; double -&gt; character</p>
<p>Explicit conversion usually implies truncation and loss of information.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Implicit conversion</span>
w &lt;-<span class="st"> </span><span class="ot">TRUE</span>
x &lt;-<span class="st"> </span>4L
y &lt;-<span class="st"> </span><span class="fl">5.8</span>
z &lt;-<span class="st"> </span>w +<span class="st"> </span>x +<span class="st"> </span>y
<span class="kw">typeof</span>(z)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Explicit conversion. Note loss of data.</span>
<span class="kw">as.integer</span>(z)</code></pre></div>
<pre><code>## [1] 10</code></pre>
</div>
<div id="class" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Class</h3>
<p>A class is an extension of the basic data types. We’ll see many examples of these. The class of a basic type will be equal to its type apart from ‘double’, whose class is ‘numeric’ for reasons I don’t pretend to understand.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(pi)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(4L)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>The type and class of a vector is returned as a scalar. Remember a vector is a set of elements which all have the same type.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="dv">1</span>:<span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
</div>
<div id="mode" class="section level3">
<h3><span class="header-section-number">4.2.5</span> Mode</h3>
<p>There is also a function called ‘mode’ which looks tempting. Ignore it.</p>
</div>
<div id="dates-and-times" class="section level3">
<h3><span class="header-section-number">4.2.6</span> Dates and times</h3>
<p>Dates in R can be tricky. Two basic classes: <code>Date</code> and <code>POSIXt</code>. The <code>Date</code> class does not get more granular than days. The <code>POSIXt</code> class can handle seconds, milliseconds, etc.</p>
<p>My recommendation is to stick with the “Date” class. Introducing times means introducing time zones and possibility for confusion or error. Actuaries rarely need to measure things in minutes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&#39;2010-01-01&#39;</span>)
<span class="kw">class</span>(x)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(x)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
</div>
<div id="more-on-dates" class="section level3">
<h3><span class="header-section-number">4.2.7</span> More on dates</h3>
<p>The default behavior for dates is that they don’t follow US conventions.</p>
<p>Don’t do this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&#39;06-30-2010&#39;</span>)</code></pre></div>
<pre><code>## Error in charToDate(x): character string is not in a standard unambiguous format</code></pre>
<p>But this is just fine:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&#39;30-06-2010&#39;</span>)</code></pre></div>
<p>If you want to preserve your sanity, stick with year, month, day.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&#39;2010-06-30&#39;</span>)</code></pre></div>
</div>
<div id="what-day-is-it" class="section level3">
<h3><span class="header-section-number">4.2.8</span> What day is it?</h3>
<p>To get the date and time of the computer, use the either <code>Sys.Date()</code> or <code>Sys.time()</code>. Note that <code>Sys.time()</code> will return both the day AND the time as a POSIXct object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>()
y &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</code></pre></div>
</div>
<div id="more-reading-on-dates" class="section level3">
<h3><span class="header-section-number">4.2.9</span> More reading on dates</h3>
<p>Worth reading the documentation about dates. Measuring time periods is a common task for actuaries. It’s easy to make huge mistakes by getting dates wrong.</p>
<p>The <code>lubridate</code> package has some nice convenience functions for setting month and day and reasoning about time periods. It also enables you to deal with time zones, leap days and leap seconds. Probably more than you need.</p>
<p><code>mondate</code> was written by an actuary and supports (among other things) handling time periods in terms of months.</p>
<ul>
<li><a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Dates.html">Date class</a></li>
<li><a href="http://www.jstatsoft.org/v40/i03/paper">lubridate</a></li>
<li><a href="http://www.r-project.org/doc/Rnews/Rnews_2001-2.pdf">Ripley and Hornik</a></li>
<li><a href="https://code.google.com/p/mondate/">mondate</a></li>
</ul>
</div>
<div id="factors" class="section level3">
<h3><span class="header-section-number">4.2.10</span> Factors</h3>
<p>Another gotcha. Factors were necessary many years ago when data collection and storage were expensive. A factor is a mapping of a character string to an integer. Particularly when importing data, R often wants to convert character values into a factor. You will often want to convert a factor into a string.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myColors &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Red&quot;</span>, <span class="st">&quot;Blue&quot;</span>, <span class="st">&quot;Green&quot;</span>, <span class="st">&quot;Red&quot;</span>, <span class="st">&quot;Blue&quot;</span>, <span class="st">&quot;Red&quot;</span>)
myFactor &lt;-<span class="st"> </span><span class="kw">factor</span>(myColors)
<span class="kw">typeof</span>(myFactor)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(myFactor)</code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.character</span>(myFactor)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.character</span>(myColors)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="altering-factors" class="section level3">
<h3><span class="header-section-number">4.2.11</span> Altering factors</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This probably won&#39;t give you what you expect</span>
myOtherFactor &lt;-<span class="st"> </span><span class="kw">c</span>(myFactor, <span class="st">&quot;Orange&quot;</span>)
myOtherFactor</code></pre></div>
<pre><code>## [1] &quot;3&quot;      &quot;1&quot;      &quot;2&quot;      &quot;3&quot;      &quot;1&quot;      &quot;3&quot;      &quot;Orange&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># And this will give you an error</span>
myFactor[<span class="kw">length</span>(myFactor)+<span class="dv">1</span>] &lt;-<span class="st"> &quot;Orange&quot;</span></code></pre></div>
<pre><code>## Warning in `[&lt;-.factor`(`*tmp*`, length(myFactor) + 1, value = &quot;Orange&quot;):
## invalid factor level, NA generated</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Must do things in two steps</span>
myOtherFactor &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="kw">levels</span>(myFactor), <span class="st">&quot;Orange&quot;</span>))
myOtherFactor[<span class="kw">length</span>(myOtherFactor)+<span class="dv">1</span>] &lt;-<span class="st"> &quot;Orange&quot;</span></code></pre></div>
</div>
<div id="avoid-factors" class="section level3">
<h3><span class="header-section-number">4.2.12</span> Avoid factors</h3>
<p>Now that you know what they are, you can spend the next few months avoiding factors. When R was created, there were compelling reasons to include factors and they still have some utility. More often than not, though, they’re a confusing hindrance.</p>
<p>If characters aren’t behaving the way you expect them to, check the variables with <code>is.factor</code>. Convert them with <code>as.character</code> and you’ll be back on the road to happiness.</p>
</div>
<div id="questions" class="section level3">
<h3><span class="header-section-number">4.2.13</span> Questions</h3>
<ul>
<li>Create a logical, integer, double and character variable.</li>
<li>Can you create a vector with both logical and character values?</li>
<li>What happens when you try to add a logical to an integer? An integer to a double?</li>
</ul>
</div>
<div id="answers" class="section level3">
<h3><span class="header-section-number">4.2.14</span> Answers</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myLogical &lt;-<span class="st"> </span><span class="ot">TRUE</span>
myInteger &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">4</span>
myDouble &lt;-<span class="st"> </span><span class="fl">3.14</span>
myCharacter &lt;-<span class="st"> &quot;Hello!&quot;</span>

y &lt;-<span class="st"> </span>myLogical +<span class="st"> </span>myInteger
<span class="kw">typeof</span>(y)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>myInteger +<span class="st"> </span>myDouble
<span class="kw">typeof</span>(y)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
</div>
<div id="from-vectors-to-matrices-and-lists" class="section level3">
<h3><span class="header-section-number">4.2.15</span> From vectors to matrices and lists</h3>
<p>A matrix is a vector with higher dimensions.</p>
<p>A list has both higher dimensions, but also different data types.</p>
</div>
<div id="a-matrix" class="section level3">
<h3><span class="header-section-number">4.2.16</span> A matrix</h3>
<p>Two ways to construct:</p>
<ol style="list-style-type: decimal">
<li>Use the <code>matrix</code> function.</li>
<li>Change the dimensions of a <code>vector</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myVector &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">100</span>
myMatrix &lt;-<span class="st"> </span><span class="kw">matrix</span>(myVector, <span class="dt">nrow=</span><span class="dv">10</span>, <span class="dt">ncol=</span><span class="dv">10</span>)

myOtherMatrix &lt;-<span class="st"> </span>myVector
<span class="kw">dim</span>(myOtherMatrix) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">10</span>)

<span class="kw">identical</span>(myMatrix, myOtherMatrix)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="section" class="section level3">
<h3><span class="header-section-number">4.2.17</span> </h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myMatrix &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow=</span><span class="dv">10</span>, <span class="dt">ncol=</span><span class="dv">10</span>)</code></pre></div>
<p><img src="raw_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
</div>
<div id="section-1" class="section level3">
<h3><span class="header-section-number">4.2.18</span> </h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(myMatrix) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">25</span>, <span class="dv">4</span>)</code></pre></div>
<p><img src="raw_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
</div>
<div id="matrix-metadata" class="section level3">
<h3><span class="header-section-number">4.2.19</span> Matrix metadata</h3>
<p>Possible to add metadata. This is typically a name for the columns or rows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myMatrix &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow=</span><span class="dv">10</span>, <span class="dt">ncol=</span><span class="dv">10</span>, <span class="dt">data =</span> <span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">100</span>))
<span class="kw">colnames</span>(myMatrix) &lt;-<span class="st"> </span>letters[<span class="dv">1</span>:<span class="dv">10</span>]
<span class="kw">head</span>(myMatrix, <span class="dv">3</span>)</code></pre></div>
<pre><code>##       a  b  c  d  e  f  g  h  i  j
## [1,] 70 96 37 39  5 51 60 55 43 13
## [2,] 54 94 21 84 73  3 35 34 92 26
## [3,] 28 14 24 91 67 62 61 36 65 17</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(myMatrix) &lt;-<span class="st"> </span><span class="kw">tail</span>(letters, <span class="dv">10</span>)
<span class="kw">head</span>(myMatrix, <span class="dv">3</span>)</code></pre></div>
<pre><code>##    a  b  c  d  e  f  g  h  i  j
## q 70 96 37 39  5 51 60 55 43 13
## r 54 94 21 84 73  3 35 34 92 26
## s 28 14 24 91 67 62 61 36 65 17</code></pre>
</div>
<div id="data-access-for-a-matrix" class="section level3">
<h3><span class="header-section-number">4.2.20</span> Data access for a matrix</h3>
<p>Matrix access is similar to vector, but with additional dimensions. For two-dimensional matrices, the order is row first, then column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myMatrix[<span class="dv">2</span>, ]</code></pre></div>
<pre><code>##  a  b  c  d  e  f  g  h  i  j 
## 54 94 21 84 73  3 35 34 92 26</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myMatrix[, <span class="dv">2</span>]</code></pre></div>
<pre><code>##  q  r  s  t  u  v  w  x  y  z 
## 96 94 14  4 19 69 45 76 85 87</code></pre>
</div>
<div id="data-access-continued" class="section level3">
<h3><span class="header-section-number">4.2.21</span> Data access continued</h3>
<p>Single index will return values by indexing along only one dimension.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myMatrix[<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 54</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myMatrix[<span class="dv">22</span>]</code></pre></div>
<pre><code>## [1] 21</code></pre>
</div>
<div id="matrix-summary" class="section level3">
<h3><span class="header-section-number">4.2.22</span> Matrix summary</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(myMatrix)</code></pre></div>
<pre><code>## [1] 5050</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colSums</span>(myMatrix)</code></pre></div>
<pre><code>##   a   b   c   d   e   f   g   h   i   j 
## 443 589 498 495 589 436 617 418 525 440</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rowSums</span>(myMatrix)</code></pre></div>
<pre><code>##   q   r   s   t   u   v   w   x   y   z 
## 469 516 465 534 354 551 540 490 445 686</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colMeans</span>(myMatrix)</code></pre></div>
<pre><code>##    a    b    c    d    e    f    g    h    i    j 
## 44.3 58.9 49.8 49.5 58.9 43.6 61.7 41.8 52.5 44.0</code></pre>
</div>
<div id="more-than-two-dimensions" class="section level3">
<h3><span class="header-section-number">4.2.23</span> More than two dimensions</h3>
<p>Like more than two dimensions? Shine on you crazy diamond.</p>
</div>
</div>
<p style="text-align: center;">
<a href="4-1-what-is-a-vector.html"><button class="btn btn-default">Previous</button></a>
<a href="4-3-exercise.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
